[
  [
    {
      "type": "cmd",
      "data": "import",
      "source": "import \"window_tools\" as \"wt\""
    },
    {
      "type": "str",
      "data": "\"window_tools\""
    },
    {
      "type": "var",
      "data": "as"
    },
    {
      "type": "str",
      "data": "\"wt\""
    }
  ],
  [
    {
      "type": "cmd",
      "data": "permission",
      "source": "permission \"request\" \"terminal\""
    },
    {
      "type": "str",
      "data": "\"request\""
    },
    {
      "type": "str",
      "data": "\"terminal\""
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "mtd",
        "data": [
          {
            "type": "var",
            "data": "window"
          },
          {
            "type": "var",
            "data": "no_desktop"
          }
        ]
      },
      "right": {
        "type": "var",
        "data": "true"
      }
    }
  ],
  [
    {
      "type": "cmd",
      "data": "window",
      "source": "window \"responsive\" true"
    },
    {
      "type": "str",
      "data": "\"responsive\""
    },
    {
      "type": "var",
      "data": "true"
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "var",
        "data": "uname"
      },
      "right": {
        "type": "mtd",
        "data": [
          {
            "type": "var",
            "data": "user"
          },
          {
            "type": "var",
            "data": "username"
          }
        ]
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "var",
        "data": "winw"
      },
      "right": {
        "type": "opr",
        "data": "+",
        "left": {
          "type": "opr",
          "data": "*",
          "left": {
            "type": "mtd",
            "data": [
              {
                "type": "var",
                "data": "uname"
              },
              {
                "type": "var",
                "data": "len"
              }
            ]
          },
          "right": {
            "type": "num",
            "data": 9
          }
        },
        "right": {
          "type": "num",
          "data": 150
        }
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "var",
        "data": "winw_start"
      },
      "right": {
        "type": "var",
        "data": "winw"
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "var",
        "data": "winw_target"
      },
      "right": {
        "type": "var",
        "data": "winw"
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "mtd",
        "data": [
          {
            "type": "var",
            "data": "window"
          },
          {
            "type": "var",
            "data": "width"
          }
        ]
      },
      "right": {
        "type": "var",
        "data": "winw"
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "mtd",
        "data": [
          {
            "type": "var",
            "data": "window"
          },
          {
            "type": "var",
            "data": "height"
          }
        ]
      },
      "right": {
        "type": "num",
        "data": 60
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "+=",
      "left": {
        "type": "var",
        "data": "winw_target"
      },
      "right": {
        "type": "num",
        "data": 10
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "var",
        "data": "last"
      },
      "right": {
        "type": "var",
        "data": "timer"
      }
    }
  ],
  [
    {
      "type": "unk",
      "data": "mainloop:"
    }
  ],
  [
    {
      "type": "unk",
      "data": "wt:load_theme"
    }
  ],
  [
    {
      "type": "cmd",
      "data": "if",
      "source": "if winw > winw_target (\n  window \"refresh_bg\"\n  if winw.round() == winw_target.round() (\n    winw.round()\n    winw_target.round()\n  )\n)"
    },
    {
      "type": "cmp",
      "data": ">",
      "left": {
        "type": "var",
        "data": "winw"
      },
      "right": {
        "type": "var",
        "data": "winw_target"
      }
    },
    {
      "type": "blk",
      "data": [
        [
          {
            "type": "cmd",
            "data": "window",
            "source": "window \"refresh_bg\""
          },
          {
            "type": "str",
            "data": "\"refresh_bg\""
          }
        ],
        [
          {
            "type": "cmd",
            "data": "if",
            "source": "if winw.round() == winw_target.round() (\n    winw.round()\n    winw_target.round()\n  )"
          },
          {
            "type": "cmp",
            "data": "==",
            "left": {
              "type": "mtd",
              "data": [
                {
                  "type": "var",
                  "data": "winw"
                },
                {
                  "type": "mtv",
                  "data": "round",
                  "parameters": []
                }
              ]
            },
            "right": {
              "type": "mtd",
              "data": [
                {
                  "type": "var",
                  "data": "winw_target"
                },
                {
                  "type": "mtv",
                  "data": "round",
                  "parameters": []
                }
              ]
            }
          },
          {
            "type": "blk",
            "data": [
              [
                {
                  "type": "asi",
                  "data": "=??",
                  "left": {
                    "type": "var",
                    "data": "winw"
                  },
                  "right": {
                    "type": "mtd",
                    "data": [
                      {
                        "type": "var",
                        "data": "winw"
                      },
                      {
                        "type": "mtv",
                        "data": "round",
                        "parameters": []
                      }
                    ]
                  }
                }
              ],
              [
                {
                  "type": "asi",
                  "data": "=??",
                  "left": {
                    "type": "var",
                    "data": "winw_target"
                  },
                  "right": {
                    "type": "mtd",
                    "data": [
                      {
                        "type": "var",
                        "data": "winw_target"
                      },
                      {
                        "type": "mtv",
                        "data": "round",
                        "parameters": []
                      }
                    ]
                  }
                }
              ]
            ]
          }
        ]
      ]
    }
  ],
  [
    {
      "type": "asi",
      "data": "+=",
      "left": {
        "type": "var",
        "data": "winw"
      },
      "right": {
        "type": "opr",
        "data": "/",
        "left": {
          "type": "opr",
          "data": "-",
          "left": {
            "type": "var",
            "data": "winw_target"
          },
          "right": {
            "type": "var",
            "data": "winw"
          }
        },
        "right": {
          "type": "num",
          "data": 10
        }
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "var",
        "data": "winw_target"
      },
      "right": {
        "type": "var",
        "data": "winw_start"
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "mtd",
        "data": [
          {
            "type": "var",
            "data": "window"
          },
          {
            "type": "var",
            "data": "width"
          }
        ]
      },
      "right": {
        "type": "var",
        "data": "winw"
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "mtd",
        "data": [
          {
            "type": "var",
            "data": "window"
          },
          {
            "type": "var",
            "data": "x"
          }
        ]
      },
      "right": {
        "type": "opr",
        "data": "-",
        "left": {
          "type": "opr",
          "data": "/",
          "left": {
            "type": "opr",
            "data": "-",
            "left": {
              "type": "var",
              "data": "screensize_x"
            },
            "right": {
              "type": "mtd",
              "data": [
                {
                  "type": "var",
                  "data": "window"
                },
                {
                  "type": "var",
                  "data": "width"
                }
              ]
            }
          },
          "right": {
            "type": "num",
            "data": 2
          }
        },
        "right": {
          "type": "num",
          "data": 5
        }
      }
    }
  ],
  [
    {
      "type": "asi",
      "data": "=",
      "left": {
        "type": "mtd",
        "data": [
          {
            "type": "var",
            "data": "window"
          },
          {
            "type": "var",
            "data": "y"
          }
        ]
      },
      "right": {
        "type": "opr",
        "data": "-",
        "left": {
          "type": "opr",
          "data": "/",
          "left": {
            "type": "var",
            "data": "screensize_y"
          },
          "right": {
            "type": "num",
            "data": 2
          }
        },
        "right": {
          "type": "num",
          "data": 35
        }
      }
    }
  ],
  [
    {
      "type": "cmd",
      "data": "square",
      "source": "square window.width window.height 0 0 1"
    },
    {
      "type": "mtd",
      "data": [
        {
          "type": "var",
          "data": "window"
        },
        {
          "type": "var",
          "data": "width"
        }
      ]
    },
    {
      "type": "mtd",
      "data": [
        {
          "type": "var",
          "data": "window"
        },
        {
          "type": "var",
          "data": "height"
        }
      ]
    },
    {
      "type": "num",
      "data": 0
    },
    {
      "type": "num",
      "data": 0
    },
    {
      "type": "num",
      "data": 1
    }
  ],
  [
    {
      "type": "cmd",
      "data": "if",
      "source": "if winw != winw_target or mouse_touching or bg_redrawn or (timer - last > 0.5) (\n  last = timer\n  square window.width - 25 window.height - 25 20 : c#window_colour\n\n  goto window.left + 30 0\n  image user.pfp 40 40\n  icon \"w 3.5 cutcircle -13 13 10 -4.5 45 cutcircle -13 -13 10 -13 45 cutcircle 13 -13 10 13 45 cutcircle 13 13 10 4.5 45\" 1 : c#window_colour\n  text uname 9 : chx#30 c#txtc\n\n  goto window.right - 30 0\n  icon \"settings\" 0.9\n  if onclick (\n    window \"add\" \"settings\"\n  )\n\n  if network.connected.not (\n    winw_target += 30\n    icon \"network\" 0.9 : chx#-30\n    icon \"w 2 line -10 -10 10 10\" 0.9\n  )\n\n  terminal \"get filechanges\"\n  if data.len > 0 (\n    winw_target += 30\n    direction timer * 160\n    icon \"w 3 cutcircle 0 0 10 0 90\" 0.9 : chx#-30\n  )\n)"
    },
    {
      "type": "log",
      "data": "or",
      "left": {
        "type": "log",
        "data": "or",
        "left": {
          "type": "log",
          "data": "or",
          "left": {
            "type": "cmp",
            "data": "!=",
            "left": {
              "type": "var",
              "data": "winw"
            },
            "right": {
              "type": "var",
              "data": "winw_target"
            }
          },
          "right": {
            "type": "var",
            "data": "mouse_touching"
          }
        },
        "right": {
          "type": "var",
          "data": "bg_redrawn"
        }
      },
      "right": {
        "type": "cmp",
        "data": ">",
        "left": {
          "type": "opr",
          "data": "-",
          "left": {
            "type": "var",
            "data": "timer"
          },
          "right": {
            "type": "var",
            "data": "last"
          }
        },
        "right": {
          "type": "num",
          "data": 0.5
        }
      }
    },
    {
      "type": "blk",
      "data": [
        [
          {
            "type": "asi",
            "data": "=",
            "left": {
              "type": "var",
              "data": "last"
            },
            "right": {
              "type": "var",
              "data": "timer"
            }
          }
        ],
        [
          {
            "type": "cmd",
            "data": "square",
            "source": "square window.width - 25 window.height - 25 20 : c#window_colour"
          },
          {
            "type": "opr",
            "data": "-",
            "left": {
              "type": "mtd",
              "data": [
                {
                  "type": "var",
                  "data": "window"
                },
                {
                  "type": "var",
                  "data": "width"
                }
              ]
            },
            "right": {
              "type": "num",
              "data": 25
            }
          },
          {
            "type": "opr",
            "data": "-",
            "left": {
              "type": "mtd",
              "data": [
                {
                  "type": "var",
                  "data": "window"
                },
                {
                  "type": "var",
                  "data": "height"
                }
              ]
            },
            "right": {
              "type": "num",
              "data": 25
            }
          },
          {
            "type": "num",
            "data": 20
          },
          {
            "type": "mod",
            "data": [
              "c",
              "window_colour"
            ]
          }
        ],
        [
          {
            "type": "cmd",
            "data": "goto",
            "source": "goto window.left + 30 0"
          },
          {
            "type": "opr",
            "data": "+",
            "left": {
              "type": "mtd",
              "data": [
                {
                  "type": "var",
                  "data": "window"
                },
                {
                  "type": "var",
                  "data": "left"
                }
              ]
            },
            "right": {
              "type": "num",
              "data": 30
            }
          },
          {
            "type": "num",
            "data": 0
          }
        ],
        [
          {
            "type": "cmd",
            "data": "image",
            "source": "image user.pfp 40 40"
          },
          {
            "type": "mtd",
            "data": [
              {
                "type": "var",
                "data": "user"
              },
              {
                "type": "var",
                "data": "pfp"
              }
            ]
          },
          {
            "type": "num",
            "data": 40
          },
          {
            "type": "num",
            "data": 40
          }
        ],
        [
          {
            "type": "cmd",
            "data": "icon",
            "source": "icon \"w 3.5 cutcircle -13 13 10 -4.5 45 cutcircle -13 -13 10 -13 45 cutcircle 13 -13 10 13 45 cutcircle 13 13 10 4.5 45\" 1 : c#window_colour"
          },
          {
            "type": "str",
            "data": "\"w 3.5 cutcircle -13 13 10 -4.5 45 cutcircle -13 -13 10 -13 45 cutcircle 13 -13 10 13 45 cutcircle 13 13 10 4.5 45\""
          },
          {
            "type": "num",
            "data": 1
          },
          {
            "type": "mod",
            "data": [
              "c",
              "window_colour"
            ]
          }
        ],
        [
          {
            "type": "cmd",
            "data": "text",
            "source": "text uname 9 : chx#30 c#txtc"
          },
          {
            "type": "var",
            "data": "uname"
          },
          {
            "type": "num",
            "data": 9
          },
          {
            "type": "mod",
            "data": [
              "chx",
              "30"
            ]
          },
          {
            "type": "mod",
            "data": [
              "c",
              "txtc"
            ]
          }
        ],
        [
          {
            "type": "cmd",
            "data": "goto",
            "source": "goto window.right - 30 0"
          },
          {
            "type": "opr",
            "data": "-",
            "left": {
              "type": "mtd",
              "data": [
                {
                  "type": "var",
                  "data": "window"
                },
                {
                  "type": "var",
                  "data": "right"
                }
              ]
            },
            "right": {
              "type": "num",
              "data": 30
            }
          },
          {
            "type": "num",
            "data": 0
          }
        ],
        [
          {
            "type": "cmd",
            "data": "icon",
            "source": "icon \"settings\" 0.9"
          },
          {
            "type": "str",
            "data": "\"settings\""
          },
          {
            "type": "num",
            "data": 0.9
          }
        ],
        [
          {
            "type": "cmd",
            "data": "if",
            "source": "if onclick (\n    window \"add\" \"settings\"\n  )"
          },
          {
            "type": "var",
            "data": "onclick"
          },
          {
            "type": "blk",
            "data": [
              [
                {
                  "type": "cmd",
                  "data": "window",
                  "source": "window \"add\" \"settings\""
                },
                {
                  "type": "str",
                  "data": "\"add\""
                },
                {
                  "type": "str",
                  "data": "\"settings\""
                }
              ]
            ]
          }
        ],
        [
          {
            "type": "cmd",
            "data": "if",
            "source": "if network.connected.not (\n    winw_target += 30\n    icon \"network\" 0.9 : chx#-30\n    icon \"w 2 line -10 -10 10 10\" 0.9\n  )"
          },
          {
            "type": "mtd",
            "data": [
              {
                "type": "var",
                "data": "network"
              },
              {
                "type": "var",
                "data": "connected"
              },
              {
                "type": "var",
                "data": "not"
              }
            ]
          },
          {
            "type": "blk",
            "data": [
              [
                {
                  "type": "asi",
                  "data": "+=",
                  "left": {
                    "type": "var",
                    "data": "winw_target"
                  },
                  "right": {
                    "type": "num",
                    "data": 30
                  }
                }
              ],
              [
                {
                  "type": "cmd",
                  "data": "icon",
                  "source": "icon \"network\" 0.9 : chx#-30"
                },
                {
                  "type": "str",
                  "data": "\"network\""
                },
                {
                  "type": "num",
                  "data": 0.9
                },
                {
                  "type": "mod",
                  "data": [
                    "chx",
                    "-30"
                  ]
                }
              ],
              [
                {
                  "type": "cmd",
                  "data": "icon",
                  "source": "icon \"w 2 line -10 -10 10 10\" 0.9"
                },
                {
                  "type": "str",
                  "data": "\"w 2 line -10 -10 10 10\""
                },
                {
                  "type": "num",
                  "data": 0.9
                }
              ]
            ]
          }
        ],
        [
          {
            "type": "cmd",
            "data": "terminal",
            "source": "terminal \"get filechanges\""
          },
          {
            "type": "str",
            "data": "\"get filechanges\""
          }
        ],
        [
          {
            "type": "cmd",
            "data": "if",
            "source": "if data.len > 0 (\n    winw_target += 30\n    direction timer * 160\n    icon \"w 3 cutcircle 0 0 10 0 90\" 0.9 : chx#-30\n  )"
          },
          {
            "type": "cmp",
            "data": ">",
            "left": {
              "type": "mtd",
              "data": [
                {
                  "type": "var",
                  "data": "data"
                },
                {
                  "type": "var",
                  "data": "len"
                }
              ]
            },
            "right": {
              "type": "num",
              "data": 0
            }
          },
          {
            "type": "blk",
            "data": [
              [
                {
                  "type": "asi",
                  "data": "+=",
                  "left": {
                    "type": "var",
                    "data": "winw_target"
                  },
                  "right": {
                    "type": "num",
                    "data": 30
                  }
                }
              ],
              [
                {
                  "type": "cmd",
                  "data": "direction",
                  "source": "direction timer * 160"
                },
                {
                  "type": "opr",
                  "data": "*",
                  "left": {
                    "type": "var",
                    "data": "timer"
                  },
                  "right": {
                    "type": "num",
                    "data": 160
                  }
                }
              ],
              [
                {
                  "type": "cmd",
                  "data": "icon",
                  "source": "icon \"w 3 cutcircle 0 0 10 0 90\" 0.9 : chx#-30"
                },
                {
                  "type": "str",
                  "data": "\"w 3 cutcircle 0 0 10 0 90\""
                },
                {
                  "type": "num",
                  "data": 0.9
                },
                {
                  "type": "mod",
                  "data": [
                    "chx",
                    "-30"
                  ]
                }
              ]
            ]
          }
        ]
      ]
    }
  ]
]